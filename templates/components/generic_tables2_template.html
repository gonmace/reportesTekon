{% extends 'base.html' %}
{% load static %}
{% load django_tables2 %}

{% block css %}
{% endblock css %}

{% block title %}{{ page_title|default:"Registros" }}{% endblock %}

{% block pre_content %}
    <!-- Breadcrumbs -->
    <div class="flex justify-between items-baseline mb-2">
        {% include 'components/common/breadcrumbs.html' %}
        <div class="flex items-center gap-2">

            {% if show_activate_button %}
            <a href="{% url app_namespace|add:':activar' %}" class="btn btn-primary btn-sm ml-2 sombra" id="activar-registro-btn">
                <i class="fa-solid fa-plus"></i>
                {{ activate_button_text|default:"Activar Registro" }}
            </a>
            {% endif %}
            
        </div>
    </div>
{% endblock pre_content %}


{% block content %}

<!-- Token CSRF para las actualizaciones AJAX -->
{% csrf_token %}

<div class="overflow-x-auto w-full">
    {% render_table table %}
</div>

{% if messages %}
<ul class="messages">
    {% for message in messages %}
    <li {% if message.tags %} class="text-red-600 {{ message.tags }}"{% endif %}>{{ message }}</li>
    {% endfor %}
</ul>
{% endif %}



{% endblock content %}


{% block extra_js %}
<script>
// Configuración para el JavaScript genérico
window.isSuperuser = {{ user.is_superuser|yesno:"true,false" }};
window.USUARIOS_URL = '{{ usuarios_url|default:"" }}';
window.ACTIVAR_URL = '{{ activar_url|default:"" }}';
window.MODAL_ID = '{{ modal_id|default:"#activar-registro-modal" }}';
window.ACTIVAR_BTN_ID = '{{ activar_btn_id|default:"#activar-registro-btn" }}';

// Verificar si Alert ya está disponible
const Alert = window.Alert || console;

// No se necesita JavaScript adicional ya que el botón es un enlace directo

// No se necesita inicialización adicional ya que el botón es un enlace directo
</script>
{% endblock extra_js %} 