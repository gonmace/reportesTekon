{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Informe Técnico</title>
  <link rel="stylesheet" href="{% static 'css/weasyprint.css' %}">
</head>
<body>

<!-- ENCABEZADO -->
<div id="page-header">
  <table class="header-table">
    <tr>
      <td class="header-logo left">
        {% include "svgs/phoenix_tower_logo_horizontal.svg" %}
      </td>
      <td class="header-title">
        <h1>TX / Technical Site Survey <br>
        {{ registro.sitio.pti_cell_id }}</h1>
      </td>
      <td class="header-logo right">
        {% include "svgs/tekon_logo.svg" %}
      </td>
    </tr>
  </table>  
</div>

<!-- PIE DE PÁGINA -->
<div id="page-footer">
  <span class="page-number"></span>
</div>

<!-- CONTENIDO DEL INFORME -->
<article id="datos-generales">
  <h2>Datos Generales.</h2>
  <section class="datos">
    <dl>
      {% for key, value in datos_generales.items %}
        <dt>{{ key }}</dt>
        <dd>{{ value }}</dd>
      {% endfor %}
    </dl>
  </section>

  <h2>INSPECCIÓN DE SITIO.</h2>
  <section class="datos">
    <dl>
      {% for key, value in inspeccion_sitio.items %}
        <dt>{{ key }}</dt>
        <dd>{{ value }}</dd>
      {% endfor %}
    </dl>
  </section>

</article>

<!-- Ejemplo de uso de tabla reutilizable -->
<article id="tabla-datos-geograficos">
  <h2>Datos Geográficos.</h2>
    {% include "reportes/partials/tabla.html" with tabla=datos_geograficos %}
</article>

<!-- Mapa del sitio -->
{% if google_sitio_image.src %}
<article id="mapa-sitio">
  <h2>Inspección del Sitio</h2>
  
  <div style="display: flex; flex-direction: row; gap: 8px; align-items: center;">
    <div style="width: 75%;">
      <img src="{{ google_sitio_image.src }}" 
           alt="{{ google_sitio_image.alt }}" 
           style="width: 420px; height: 420px; display: block; object-fit: cover; border-radius: 5px;">
      <p style="text-align: center; font-size: 10pt; color: #666;">Desfase Mandato-Inspección: {{ google_sitio_image.desfase }}
        <svg width="12" height="12" viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg">
          <circle cx="6" cy="6" r="6" fill="{{ google_sitio_image.desfase_color }}"/>
        </svg>
      </p>
    </div>
    <!-- Iconos de la imagen del sitio -->
    <div style="display: flex; flex-direction: column; gap: 4px; align-items: left; width: 35%;">

      <div class="icono-texto">
        <svg xmlns="http://www.w3.org/2000/svg" height="25px" width="25px" xml:space="preserve" viewBox="0 0 12 15" style="fill:currentColor">
          <g id="layer1" transform="translate(-99.2 -141)" style="fill:currentColor">
              <g id="g2"  transform="matrix(.5 0 0 .5 96.6 140)" style="fill:{{ google_sitio_image.icon1_color }}">
                  <g id="SVGRepo_iconCarrier">
                      <path id="path1" d="M16.2 2.3a11 11 0 0 0-8.4 18l8.4 10 8.5-10 .3-.4a11 11 0 0 0-8.8-17.6z" />
                  </g>
              </g>
          </g>
        </svg>
        <h4>{{ google_sitio_image.name1 }}</h4>
      </div>

      <!-- Iconos de la imagen de Mandato -->
      <div class="icono-texto">
        <svg xmlns="http://www.w3.org/2000/svg" height="25px" width="25px" xml:space="preserve" viewBox="0 0 12 15" style="fill:currentColor">
          <g id="layer1" transform="translate(-99.2 -141)" style="fill:currentColor">
              <g id="g2"  transform="matrix(.5 0 0 .5 96.6 140)" style="fill:{{ google_sitio_image.icon2_color }}">
                  <g id="SVGRepo_iconCarrier">
                      <path id="path1" d="M16.2 2.3a11 11 0 0 0-8.4 18l8.4 10 8.5-10 .3-.4a11 11 0 0 0-8.8-17.6z" />
                  </g>
              </g>
          </g>
        </svg>
        <h4>{{ google_sitio_image.name2 }}</h4>
      </div>

      <!-- Desfase Mandato-Inspección -->
      {% comment %} <div class="icono-texto">
        <h4>Desfase M-I:</h4>
        <h4>{{ google_sitio_image.desfase }}</h4>
        
          <svg width="12" height="12" viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg">
            <circle cx="6" cy="6" r="6" fill="{{ google_sitio_image.desfase_color }}"/>
          </svg>
        
      </div> {% endcomment %}

    </div>
  </div>
  
</article>
{% endif %}

<div style="break-before: page;"></div>

<!-- Registro del Sitio -->
<article class="content-registro">
  <section>
    {% for key, value in registro_sitio.items %}
    {% if value != '' %}
      <p><strong>{{ key }}</strong> {{ value }}</p>
    {% endif %}
  {% endfor %}
  </section>
</article>

<!-- Fotos del Sitio -->
{% if registro_sitio_fotos.fotos %}
<article class="content-registro">
  <h2>Fotos del Sitio</h2>
  <section>
    <div style="display: flex; flex-wrap: wrap; gap: 10px; justify-content: center;">
      {% for foto in registro_sitio_fotos.fotos %}
        <div style="text-align: center; margin-bottom: 15px;">
          <img src="{{ foto.src }}" 
               alt="{{ foto.alt }}" 
               style="width: 200px; height: 150px; object-fit: cover; border: 1px solid #ccc; border-radius: 5px;">
          {% if foto.descripcion %}
            <p style="margin-top: 5px; font-size: 10pt; color: #666;">{{ foto.descripcion }}</p>
          {% endif %}
        </div>
      {% endfor %}
    </div>
  </section>
</article>
{% endif %}

<!-- Registro Acceso -->
<article class="content-registro">
  <h2>Acceso al Sitio</h2>
  <section>
    {% for key, value in registro_acceso.items %}
    {% if value != '' %}
      <p><strong>{{ key }}</strong> {{ value }}</p>
    {% endif %}
  {% endfor %}
</article>




<!-- Mapa del empalme -->
{% if google_empalme_image.src %}
<article id="mapa-empalme">
  
  <div style="display: flex; flex-direction: row; gap: 8px; align-items: center;">
    <div style="width: 70%;">
      <img src="{{ google_empalme_image.src }}" 
           alt="{{ google_empalme_image.alt }}" 
           style="width: 100%; height: auto; display: block;">
    </div>
    <!-- Iconos de la imagen del sitio -->
    <div style="display: flex; flex-direction: column; gap: 4px; align-items: left; width: 30%;">

      <div class="icono-texto">
        <svg xmlns="http://www.w3.org/2000/svg" height="25px" width="25px" xml:space="preserve" viewBox="0 0 12 15" style="fill:currentColor">
          <g id="layer1" transform="translate(-99.2 -141)" style="fill:currentColor">
              <g id="g2"  transform="matrix(.5 0 0 .5 96.6 140)" style="fill:{{ google_empalme_image.icon1_color }}">
                  <g id="SVGRepo_iconCarrier">
                      <path id="path1" d="M16.2 2.3a11 11 0 0 0-8.4 18l8.4 10 8.5-10 .3-.4a11 11 0 0 0-8.8-17.6z" />
                  </g>
              </g>
          </g>
        </svg>
        <h4>{{ google_empalme_image.name1 }}</h4>
      </div>

      <!-- Iconos de la imagen de Mandato -->
      <div class="icono-texto">
        <svg xmlns="http://www.w3.org/2000/svg" height="25px" width="25px" xml:space="preserve" viewBox="0 0 12 15" style="fill:currentColor">
          <g id="layer1" transform="translate(-99.2 -141)" style="fill:currentColor">
              <g id="g2"  transform="matrix(.5 0 0 .5 96.6 140)" style="fill:{{ google_empalme_image.icon2_color }}">
                  <g id="SVGRepo_iconCarrier">
                      <path id="path1" d="M16.2 2.3a11 11 0 0 0-8.4 18l8.4 10 8.5-10 .3-.4a11 11 0 0 0-8.8-17.6z" />
                  </g>
              </g>
          </g>
        </svg>
        <h4>{{ google_empalme_image.name2 }}</h4>
      </div>

      <!-- Desfase Mandato-Inspección -->
      <div class="icono-texto">
        <h4>Desfase M-I:</h4>
        <h4>{{ google_empalme_image.desfase }}</h4>
        
          <svg width="12" height="12" viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg">
            <circle cx="6" cy="6" r="6" fill="{{ google_empalme_image.desfase_color }}"/>
          </svg>
        
      </div>

    </div>
  </div>
  
</article>
{% endif %}

</body>
</html>
